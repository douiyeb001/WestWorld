
#if !defined(AFX_GAMESTATE_H_INCLUDED_)
#define AFX_GAMESTATE_H_INCLUDED_

#include <irrlicht.h>
#include "GameManager.h"

using namespace irr;
using namespace core;
using namespace scene;
using namespace video;
using namespace io;
using namespace gui;

////////////////////////////////////////////////////////////////////////////////////////////////////
/// <summary>	Manager for games. </summary>
///
////////////////////////////////////////////////////////////////////////////////////////////////////

class CGameManager;

////////////////////////////////////////////////////////////////////////////////////////////////////
/// <summary>	A game state. </summary>
///
////////////////////////////////////////////////////////////////////////////////////////////////////

class CGameState
{
public:

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary>	Initializes this object. </summary>
	///
	/// <param name="pManager">	[in,out] If non-null, the manager. </param>
	////////////////////////////////////////////////////////////////////////////////////////////////////

	virtual void Init(CGameManager* pManager) = 0;

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary>	Updates the given pManager. </summary>
	///
	/// <param name="pManager">	[in,out] If non-null, the manager. </param>
	////////////////////////////////////////////////////////////////////////////////////////////////////

	virtual void Update(CGameManager* pManager) = 0;

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary>	Clears this object to its blank/initial state. </summary>
	///
	/// <param name="pManager">	[in,out] If non-null, the manager. </param>
	////////////////////////////////////////////////////////////////////////////////////////////////////

	virtual void Clear(CGameManager* pManager) = 0;

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary>	Keyboard event. </summary>
	///
	/// <param name="pManager">	[in,out] If non-null, the manager. </param>
	////////////////////////////////////////////////////////////////////////////////////////////////////

	virtual void KeyboardEvent(CGameManager* pManager) = 0;

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary>	Mouse event. </summary>
	///
	/// <param name="pManager">	[in,out] If non-null, the manager. </param>
	////////////////////////////////////////////////////////////////////////////////////////////////////

	virtual void MouseEvent(CGameManager* pManager) = 0;

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary>	Destructor. </summary>
	///
	////////////////////////////////////////////////////////////////////////////////////////////////////

	virtual ~CGameState();

protected:

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary>	Default constructor. </summary>
	///
	////////////////////////////////////////////////////////////////////////////////////////////////////

	CGameState();

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary>	Change state. </summary>
	///
	/// <param name="pManager">	[in,out] If non-null, the manager. </param>
	/// <param name="pState">  	[in,out] If non-null, the state. </param>
	////////////////////////////////////////////////////////////////////////////////////////////////////

	void ChangeState(CGameManager* pManager, CGameState* pState);
	void ReinitializeState(CGameManager* pManager, CGameState* pState);

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary>	Fade in out. </summary>
	///
	/// <param name="pManager">	[in,out] If non-null, the manager. </param>
	////////////////////////////////////////////////////////////////////////////////////////////////////

	void FadeInOut(CGameManager* pManager);
	/// <summary>	mouse. </summary>
	int m_iDebounce;
	/// <summary>	The in out fader. </summary>
	IGUIInOutFader* m_inOutFader;
	/// <summary>	The back colour. </summary>
	video::SColor m_backColour;

};

#endif


